{
  email {$CADDY_ACME_EMAIL}
}

(common) {
  @api path /api* /docs* /openapi.json /redoc
  handle @api {
    reverse_proxy api:8000
  }

  handle {
    reverse_proxy frontend:4173
  }
}

:80 {
  redir https://{host}{uri}
}

{$CADDY_DOMAIN} {
  {$CADDY_TLS_DIRECTIVE}
  import common
}
